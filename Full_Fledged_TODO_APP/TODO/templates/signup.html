{% extends "base.html" %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/signup.css' %}">
{% endblock %}

{% block content %}
<div class="auth-container">
    <h2>Create Account</h2>

    {% if messages %}
    <div class="messages">
        {% for message in messages %}
            <div class="alert {{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}

    <form method="POST" id="signupForm">
        {% csrf_token %}

        <!-- First Name -->
        <div class="form-group">
            <label>{{ SForm.first_name.label }}</label>
            {{ SForm.first_name }}
        </div>

        <!-- Last Name -->
        <div class="form-group">
            <label>{{ SForm.last_name.label }}</label>
            {{ SForm.last_name }}
        </div>

        <!-- Email + SEND OTP -->
        <div class="form-group">
            <label>{{ SForm.email.label }}</label>

            <div class="inline-field">
                {{ SForm.email }}
                <button type="button"
                        id="sendOtpBtn"
                        class="btn-outline">
                    Send OTP
                </button>
            </div>

            <small id="otpStatus" class="status-text"></small>
        </div>

        <!-- OTP FIELD -->
        <div class="form-group" id="otpSection" style="display:none;">
            <label>Enter OTP</label>

            <div class="inline-field">
                <input type="text"
                       id="otpInput"
                       placeholder="6-digit OTP"
                       name="otp"
                       maxlength="6">

                <button type="button"
                        id="verifyOtpBtn"
                        class="btn-outline success">
                    Verify
                </button>
            </div>

            <small id="verifyStatus" class="status-text"></small>
        </div>

        <!-- Password -->
        <div id="passwordSection" style="display: none;">
    <div class="form-group">
        <label>{{ SForm.password1.label }}</label>
        {{ SForm.password1 }}
        <small class="help-text">{{ SForm.password1.help_text|safe }}</small>
    </div>

    <div class="form-group">
        <label>{{ SForm.password2.label }}</label>
        {{ SForm.password2 }}
    </div>
</div>

       <button type="submit" id="signupBtn" class="btn-primary">
    Sign Up
</button>
    </form>

    <div class="auth-link">
        Already have an account?
        <a href="{% url 'user_login' %}">Login</a>
    </div>
</div>

<script src="{% static 'js/signup.js' %}"></script>
{% endblock %}
